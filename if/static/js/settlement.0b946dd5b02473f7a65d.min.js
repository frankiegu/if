webpackJsonp([12,17,19,20],{250:function(t,e,a){(function(t){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=a(16),s=n(i),r=a(15),l=n(r),c=a(11),o=n(c),d=a(35),p=a(9),u=a(14),f=a(91);e.default={prop:[],data:function(){return{tel:null,sex:"",birthday:"",linkman:"",btnMsg:"下单",payment:[{label:"微信",value:"wxpay"}],paymentSlected:"wxpay"}},computed:(0,o.default)({},(0,p.mapState)(["cartData"]),{startDate:function(){return new Date(1969,12,1)}}),mounted:function(){t.isEmptyObject(this.cartData.products)&&this.$router.push({path:"/"})},methods:(0,o.default)({},(0,p.mapState)(["UPDATE_CARTDATA"]),{openPicker:function(){this.$refs.picker.open()},handleConfirm:function(t){this.birthday=(0,d.dateFormat)(t,"/")},createOrder:function(){var t=this;return(0,l.default)(s.default.mark(function e(){var a,n,i,r,l;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=t.linkman){e.next=3;break}return(0,f.Toast)("请填写用户名"),e.abrupt("return");case 3:if(""!=t.sex){e.next=6;break}return(0,f.Toast)("请选择性别"),e.abrupt("return");case 6:if(a=/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/,a.test(t.tel)){e.next=10;break}return(0,f.Toast)("请输入有效的手机号码！"),e.abrupt("return");case 10:n={},n.userInfo={},n.userInfo.linkman=t.linkman,n.userInfo.birthday=t.birthday,n.userInfo.tel=t.tel,n.userInfo.sex=t.sex,n.book_time=t.cartData.book_time,n.pay_id=t.pay_id,n.products=[];for(i in t.cartData.products)n.products.push(t.cartData.products[i]);return e.next=22,(0,u.order)("POST","",n);case 22:r=e.sent,"undefined"!=typeof r.order_id&&"wxpay"==t.paymentSlected&&(l=(0,d.getStore)("token"),window.location.href="http://"+window.location.host+"/static/pay/wxpay.html?token="+l+"&order_id="+r.order_id+"&payment=wxpay");case 24:case"end":return e.stop()}},e,t)}))()}})}}).call(e,a(52))},511:function(t,e,a){e=t.exports=a(4)(),e.push([t.id,".content[data-v-5f5b4b2d]{padding:5px;background-color:#fff}.content-item[data-v-5f5b4b2d]{color:#26a2ff;padding:5px;font-size:15px}.content-item[data-v-5f5b4b2d],.mint-tabbar[data-v-5f5b4b2d]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.mint-tabbar[data-v-5f5b4b2d]{-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:10px;background-color:#fff;height:30px}","",{version:3,sources:["/./src/page/settlement/settlement.vue"],names:[],mappings:"AACA,0BACE,YAAa,AACb,qBAAwB,CACzB,AACD,+BASE,cAAe,AACf,YAAa,AACb,cAAgB,CACjB,AACD,6DAZE,oBAAqB,AAErB,oBAAqB,AACrB,aAAc,AACd,yBAA0B,AAEtB,sBAAuB,AACnB,6BAA+B,CAqBxC,AAhBD,8BASE,yBAA0B,AAEtB,sBAAuB,AACnB,mBAAoB,AAC5B,aAAc,AACd,sBAAwB,AACxB,WAAa,CACd",file:"settlement.vue",sourcesContent:["\n.content[data-v-5f5b4b2d] {\n  padding: 5px;\n  background-color: white;\n}\n.content-item[data-v-5f5b4b2d] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n  -webkit-justify-content: space-between;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  color: #26a2ff;\n  padding: 5px;\n  font-size: 15px;\n}\n.mint-tabbar[data-v-5f5b4b2d] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: justify;\n  -webkit-justify-content: space-between;\n      -ms-flex-pack: justify;\n          justify-content: space-between;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  padding: 10px;\n  background-color: white;\n  height: 30px;\n}\n\n\n"],sourceRoot:"webpack://"}])},540:function(t,e,a){var n=a(511);"string"==typeof n&&(n=[[t.id,n,""]]);a(5)(n,{});n.locals&&(t.exports=n.locals)},574:function(t,e,a){a(540);var n=a(2)(a(250),a(601),"data-v-5f5b4b2d",null);t.exports=n.exports},601:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("mt-header",{attrs:{fixed:"",title:"订单"}}),t._v(" "),a("div",{staticClass:"page-header-main"},[a("div",{staticClass:"page-part"},[a("label",{staticClass:"mint-radiolist-title"},[t._v("基本信息")]),t._v(" "),a("mt-cell",{attrs:{value:"重新选择"},nativeOn:{click:function(e){t.$router.go(-1)}}},[a("div",{slot:"title"},[a("span",[t._v("时间：")]),a("span",{staticStyle:{color:"grey"}},[t._v(t._s(t.cartData.book_time))])])]),t._v(" "),a("mt-cell",{attrs:{title:"已选服务："}}),t._v(" "),a("div",{staticClass:"content"},t._l(t.cartData.products,function(e){return a("div",{staticClass:"content-item"},[a("p",[t._v(t._s(e.product_name))]),t._v(" "),a("p",[t._v("￥"+t._s(e.total_price))])])})),t._v(" "),a("mt-cell",{attrs:{title:"组合优惠"}},[t._v("￥"+t._s(t.cartData.discount))])],1),t._v(" "),a("div",{staticClass:"page-part"},[a("label",{staticClass:"mint-radiolist-title"},[t._v("用户信息")]),t._v(" "),a("mt-field",{attrs:{label:"用户名",placeholder:"请输入用户名"},model:{value:t.linkman,callback:function(e){t.linkman=e},expression:"linkman"}}),t._v(" "),a("mt-field",{attrs:{label:"手机号",placeholder:"请输入手机号",type:"tel"},model:{value:t.tel,callback:function(e){t.tel=e},expression:"tel"}}),t._v(" "),a("a",{staticClass:"mint-cell mint-field"},[a("div",{staticClass:"mint-cell-wrapper"},[t._m(0),t._v(" "),a("div",{staticClass:"mint-cell-value"},[t.birthday?t._e():a("p",{staticClass:"mint-field-core",staticStyle:{color:"#767676"},on:{click:t.openPicker}},[t._v("请选择日期")]),t._v(" "),t.birthday?a("p",{staticClass:"mint-field-core",on:{click:t.openPicker}},[t._v(t._s(t.birthday))]):t._e()])])]),t._v(" "),a("mt-radio",{attrs:{align:"right",options:["男","女"]},model:{value:t.sex,callback:function(e){t.sex=e},expression:"sex"}})],1),t._v(" "),a("div",{staticClass:"page-part"},[a("mt-radio",{attrs:{align:"right",title:"支付方式",options:t.payment},model:{value:t.paymentSlected,callback:function(e){t.paymentSlected=e},expression:"paymentSlected"}})],1),t._v(" "),a("mt-datetime-picker",{ref:"picker",attrs:{type:"date",startDate:t.startDate},on:{confirm:t.handleConfirm}}),t._v(" "),a("div",{staticClass:"mint-tabbar is-fixed"},[a("span",[a("b",{staticClass:"settlement-amount"},[t._v("总计:￥"+t._s(t.cartData.amount))]),t._v(" "),a("span",{staticClass:"settlement-discount"},[t._v("（优惠:￥"+t._s(t.cartData.discount)+"）")])]),t._v(" "),a("mt-button",{attrs:{type:"primary"},on:{click:t.createOrder}},[t._v(t._s(t.btnMsg))])],1)],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mint-cell-title"},[a("span",{staticClass:"mint-cell-text"},[t._v("生日")])])}]}}});